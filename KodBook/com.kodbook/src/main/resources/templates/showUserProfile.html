<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>My Profile</title>
    <link rel="stylesheet" type="text/css" th:href="@{/profile.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
    background: #000;
    color: #FFD700;
    font-family: 'Segoe UI', Arial, sans-serif;
    margin: 0;
    min-height: 100vh;
}

/* Navigation Bar */
nav {
    background: #111;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 24px;
    border-bottom: 2px solid #FFD700;
}
nav span {
    font-weight: bold;
    font-size: 1.2rem;
    color: #FFD700;
}
nav a {
    color: #FFD700;
    text-decoration: none;
    margin: 0 10px;
    font-size: 1.1rem;
    transition: color 0.3s;
}
nav a:hover {
    color: #fff;
}

/* Profile Header */
.profile-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 36px auto 18px auto;
    max-width: 480px;
}
.cover-photo {
    width: 100%;
    height: 120px;
    background: #111;
    border-radius: 16px 16px 0 0;
    margin-bottom: -60px;
}
.profile-picture img {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    border: 4px solid #FFD700;
    background: #000;
    box-shadow: 0 2px 12px rgba(255, 214, 0, 0.18);
}
.username h1 {
    margin: 18px 0 0 0;
    color: #FFD700;
    font-size: 2rem;
    font-weight: bold;
    letter-spacing: 1px;
}

/* Profile Info */
.profile-content {
    display: flex;
    justify-content: center;
    margin-bottom: 32px;
}
.profile-info {
    background: #111;
    border: 2px solid #FFD700;
    border-radius: 14px;
    padding: 24px 32px;
    max-width: 420px;
    box-shadow: 0 6px 32px 0 rgba(255, 214, 0, 0.10);
}
.profile-info ul {
    list-style: none;
    padding: 0;
    margin: 0 0 12px 0;
}
.profile-info li {
    margin: 10px 0;
    font-size: 1rem;
    color: #FFD700;
    display: flex;
    align-items: center;
    gap: 8px;
}
.profile-info i {
    color: #FFD700;
    margin-right: 6px;
}
.social-links p {
    margin: 8px 0;
}
.social-links a {
    color: #FFD700;
    text-decoration: underline;
    transition: color 0.2s;
}
.social-links a:hover {
    color: #fff;
}

/* Posts Grid */
.posts-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 28px;
    padding: 32px;
    max-width: 1100px;
    margin: 0 auto 40px auto;
}
.post-card {
    background: #181818;
    border: 2px solid #FFD700;
    border-radius: 14px;
    overflow: hidden;
    box-shadow: 0 4px 18px 0 rgba(255, 214, 0, 0.10);
    transition: box-shadow 0.2s, transform 0.2s;
    position: relative;
}
.post-card:hover {
    box-shadow: 0 8px 32px 0 rgba(255, 214, 0, 0.18);
    transform: translateY(-2px) scale(1.02);
}
.post-header {
    display: flex;
    align-items: center;
    padding: 10px 14px 0 14px;
}
.profile-pic img {
    width: 38px;
    height: 38px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #FFD700;
    background: #000;
}
.username {
    margin-left: 12px;
    font-weight: bold;
    font-size: 1rem;
    color: #FFD700;
}
.post-image img {
    width: 100%;
    height: 180px;
    object-fit: cover;
    display: block;
    border-bottom: 1px solid #FFD700;
    margin-top: 10px;
}
.caption {
    padding: 10px 14px 0 14px;
    font-size: 1.05rem;
    color: #FFD700;
    font-weight: 500;
}
.likes {
    padding: 4px 14px;
    font-size: 1rem;
    color: #FFD700;
}
.like-form, .comment-form {
    padding: 0 14px;
    margin-top: 8px;
    display: flex;
    flex-direction: column;
    gap: 5px;
}
.like-form input[type="submit"],
.comment-form input[type="submit"] {
    background: #FFD700;
    border: none;
    color: #000;
    font-weight: bold;
    padding: 6px 0;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1rem;
    letter-spacing: 0.5px;
    transition: background 0.3s, color 0.3s;
}
.like-form input[type="submit"]:hover,
.comment-form input[type="submit"]:hover {
    background: #fff;
    color: #111;
}
.comment-form textarea {
    resize: none;
    height: 54px;
    padding: 8px;
    border-radius: 4px;
    border: 1px solid #FFD700;
    background-color: #111;
    color: #FFD700;
    font-size: 1rem;
}
.comment-form textarea:focus {
    outline: none;
    border-color: #fff200;
    box-shadow: 0 0 0 2px #fff20033;
}
.comments-section {
    padding: 0 14px 10px 14px;
    margin-top: 8px;
}
.comments-section h4 {
    margin: 0 0 6px 0;
    font-size: 1rem;
    color: #FFD700;
}
.comments-section ul {
    padding-left: 18px;
    margin: 0;
}
.comments-section li {
    list-style-type: circle;
    margin-bottom: 6px;
    color: #FFD700;
    font-size: 0.97rem;
}

@media (max-width: 700px) {
    .profile-header, .profile-info {
        max-width: 98vw;
        padding: 18px 4vw 12px 4vw;
    }
    .posts-container {
        grid-template-columns: 1fr;
        gap: 18px;
        padding: 10px;
    }
    .post-image img {
        height: 120px;
    }
}

    </style>
</head>
<body>
    <!-- Navigation bar -->
    <nav>
        <span th:text="${session.username}"></span>
        <a href="/goHome"><i class="fas fa-home"></i> News feed</a>
        <a href="/openCreatePost"><i class="fas fa-plus-circle"></i> Create post</a>
        <a href="/openMyProfile"><i class="fas fa-user-circle"></i> My profile</a>
        <a href="/logout"><i class="fas fa-sign-out-alt"></i> LOG OUT</a>
    </nav>

    <div class="profile-header">
        <!-- Cover Photo (optional, but to use space effectively) -->
        <div class="cover-photo">
            <!-- If you decide to add a cover photo feature -->
        </div>

        <!-- Profile Picture -->
        <div class="profile-picture">
            <img th:if="${user.photoBase64}" 
                 th:src="'data:image/jpeg;base64,' + ${user.photoBase64}" 
                 alt="Profile Photo" />
        </div>

        <!-- Username -->
        <div class="username">
            <h1 th:text="${user.username}"></h1>
        </div>
    </div>

    <div class="profile-content">
        <!-- Profile Info -->
        <div class="profile-info">
            <ul>
                <li><i class="fas fa-calendar-alt"></i> Date of Birth: <span th:text="${user.dob}"></span></li>
                <li><i class="fas fa-venus-mars"></i> Gender: <span th:text="${user.gender}"></span></li>
                <li><i class="fas fa-map-marker-alt"></i> City: <span th:text="${user.city}"></span></li>
                <li><i class="fas fa-graduation-cap"></i> College: <span th:text="${user.college}"></span></li>
                <li><i class="fas fa-info-circle"></i> Bio: <span th:text="${user.bio}"></span></li>
            </ul>

            <!-- Social Links -->
            <div class="social-links">
                <p><i class="fab fa-linkedin"></i> <a th:href="${user.linkedIn}" target="_blank">LinkedIn</a></p>
                <p><i class="fab fa-github"></i> <a th:href="${user.gitHub}" target="_blank">GitHub</a></p>
            </div>
        </div>
    
    
    </div>
    <div class="posts-container">
        <span th:each="post : ${myPosts}">
            <div class="post-card">
                <!-- Profile picture and Username -->
                <div class="post-header">
                    <div class="profile-pic">
                        <img th:if="${post.user.photoBase64}" 
                             th:src="'data:image/jpeg;base64,' + ${post.user.photoBase64}" 
                             alt="User Photo" />
                    </div>
                    <span class="username" th:text="${post.user.username}">Unknown</span>
                </div>

                <!-- Post Image -->
                <div class="post-image">
                    <img th:if="${post.photoBase64}" 
                         th:src="'data:image/jpeg;base64,' + ${post.photoBase64}" 
                         alt="Post Photo" />
                </div>

                <!-- Caption -->
                <p class="caption">
                    <span th:text="${post.caption}"></span>
                </p>

                <!-- Likes -->
                <p class="likes">
                    <strong>Likes:</strong> 
                    <span th:text="${post.likes}"></span>
                </p>

                <!-- Like form -->
                <form action="/likePost" method="post" class="like-form">
                    <input type="hidden" name="id" th:value="${post.id}">
                    <input type="submit" value="LIKE POST">
                </form>

                <!-- Comment form -->
                <form action="/addComment" method="post" class="comment-form">
                    <input type="hidden" name="id" th:value="${post.id}">
                    <textarea name="comment" placeholder="Add a comment..." required></textarea>
                    <input type="submit" value="Comment">
                </form>

                <!-- Displaying Comments -->
                <div class="comments-section">
                    <h4>Comments:</h4>
                    <ul>
                        <li th:each="comment : ${post.comments}">
                            <span th:text="${comment}"></span>
                        </li>
                    </ul>
                </div>
            </div>
        </span>
    </div>
</body>
</html>
